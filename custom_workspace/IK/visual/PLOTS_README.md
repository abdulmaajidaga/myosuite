# Kinematic Phase Analysis - Visualizations Guide

This folder contains a suite of 7 comprehensive charts generated by `comprehensive_phase_analysis.py`. These plots are designed to analyze the wrist movement of stroke patients across 4 distinct phases: **Reach**, **Lift**, **Place**, and **Rest**.

## Color Legend
Across all plots, the phases are consistently color-coded:
-   ðŸŸ¢ **Green:** Reach Phase (Start $\to$ Bottle)
-   ðŸŸ  **Orange:** Lift Phase (Bottle $\to$ Mouth)
-   ðŸ”µ **Blue:** Place Phase (Mouth $\to$ Table)
-   âšª **Gray:** Rest Phase (Table $\to$ End)

---

## 1. Wrist Position Trajectories (`analysis_1_wrist_trajectories.png`)
**Type:** 2D Grid of Time-Series Plots
-   **What it shows:** The raw X (Red), Y (Green), and Z (Blue) positions of the wrist over time for every single file. Backgrounds are shaded by phase.
-   **Why it matters:** This is your "sanity check." It lets you see the raw data quality, identify files with missing markers (flat lines), and see the absolute duration of each attempt.
-   **Look for:** Broken lines, sudden spikes (noise), or phases that look unusually long or short.

## 2. 3D Arm Postures (`analysis_2_poses_3d.png`)
**Type:** Aggregated 3D Stick Figures
-   **What it shows:** A snapshot of the arm's geometry (Shoulder-Elbow-Wrist) for *all 25 subjects* overlaid on top of each other at 4 specific instants:
    1.  Start Position
    2.  Moment of Picking (End of Reach)
    3.  Moment at Mouth (End of Lift)
    4.  Moment of Placing (End of Place)
-   **Alignment:** All shoulders are pinned to `(0,0,0)`.
-   **Why it matters:** It isolates **posture** from **position**. You can see if some patients flare their elbows out (abduction) or fail to fully extend their arm during the reach, regardless of where they sat in the room.

## 3. Phase Feature Metrics (`analysis_3_boxplots.png`)
**Type:** Boxplots (Statistical Distribution)
-   **What it shows:** The distribution of key kinematic features across the 4 phases:
    -   **Duration (s):** How long each phase took.
    -   **Peak Velocity (mm/s):** The maximum speed reached.
    -   **Path Length (mm):** The total distance traveled.
-   **Why it matters:** It reveals the "signature" of the movement.
    -   *Example:* "Lift" might have the highest peak velocity but shortest duration.
    -   *Example:* High variance (tall box) in "Reach" duration suggests some patients struggle specifically with initiating the movement.

## 4. 3D Spatial Paths (`analysis_4_paths_3d.png`)
**Type:** 3D Trajectory "Tube"
-   **What it shows:** The actual spatial path traced by the wrist in 3D space for all files, colored by phase.
-   **Why it matters:** It shows the **shape** and **volume** of the workspace.
    -   **Green Lines:** Show the "funnel" of reaching forward.
    -   **Orange Lines:** Show the arc of lifting to the mouth.
    -   **Deviations:** Lines that stray far from the central bundle indicate abnormal movement patterns (e.g., circling around instead of reaching straight).

## 5. Feature Heatmap (`analysis_5_heatmap.png`)
**Type:** Normalized Heatmap matrix
-   **What it shows:** A grid where Rows = Files and Columns = Features (e.g., `Reach_Duration`, `Lift_PeakVel`). Colors range from Blue (Low) to Red (High).
-   **Why it matters:** The best tool for **outlier detection**.
    -   If one row is entirely bright red, that subject was slow/erratic across the board.
    -   If one column is varying wildly (checkered), that phase is highly variable across subjects.

## 6. Time-Normalized Velocity (`analysis_6_norm_time.png`)
**Type:** Normalized Kinematic Profiles (0-100%)
-   **What it shows:** Velocity profiles stretched/compressed so every phase represents 0% to 100% progress. The **Red Line** is the mean (average) behavior; gray lines are individual trials.
-   **Why it matters:** It removes the effect of speed to compare **coordination**.
    -   *Normal:* A bell-shaped velocity curve (starts slow, speeds up, slows down).
    -   *Abnormal:* Multi-peaked curves (start-stop-start movement) will show up as "messy" gray lines deviating from the smooth red mean.

## 7. Parallel Coordinates (`analysis_7_parallel_coords.png`)
**Type:** Multi-Variable Line Chart
-   **What it shows:** Each file is a single line that zig-zags across vertical axes representing different features.
-   **Why it matters:** It visualizes **trade-offs** and **clusters**.
    -   *Example:* You might see a cluster of lines that have High Reach Duration (top of Axis 1) but Low Peak Velocity (bottom of Axis 2), indicating a "Slow & Cautious" strategy group.
    -   Crossing lines indicate inverse relationships.

---

## How to Regenerate
1.  **Select Phases Manually:**
    ```bash
    python3 IK/visual/interactive_phase_selector.py
    ```
    (Follow on-screen instructions to click Reach/Lift/Place points).

2.  **Generate All Plots:**
    ```bash
    python3 IK/visual/comprehensive_phase_analysis.py
    ```
    (This reads the saved JSON from step 1 and produces all 7 PNG files).
